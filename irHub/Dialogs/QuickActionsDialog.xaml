<hc:Window
    BorderThickness="0"
    KeyUp="QuickActionsDialog_OnKeyUp"
    Loaded="Dialog_OnLoaded"
    ResizeMode="NoResize"
    ShowCloseButton="False"
    ShowIcon="False"
    ShowInTaskbar="False"
    ShowMaxButton="False"
    ShowMinButton="False"
    ShowNonClientArea="False"
    ShowTitle="False"
    SystemBackdropType="Acrylic"
    Width="550"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d"
    x:Class="irHub.Dialogs.QuickActionsDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:ico="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Window.Resources>
        <Style TargetType="hc:WatermarkTextBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="hc:WatermarkTextBox">
                        <Grid>
                            <TextBox
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="18"
                                FontWeight="Medium"
                                Foreground="White"
                                GotKeyboardFocus="SearchBox_OnGotKeyboardFocus"
                                Height="40"
                                KeyUp="SearchBox_KeyUp"
                                LostKeyboardFocus="SearchBox_OnLostKeyboardFocus"
                                x:Name="PART_TextBox" />
                            <TextBlock
                                Background="Transparent"
                                FontWeight="Bold"
                                Foreground="#A5ACB3"
                                Height="30"
                                IsHitTestVisible="False"
                                Margin="8,6,0,0"
                                Text="Search..."
                                Visibility="Collapsed"
                                x:Name="PART_Watermark" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" SourceName="PART_TextBox" Value="">
                                <Setter Property="Visibility" TargetName="PART_Watermark" Value="Visible" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Border
        Background="Transparent"
        CornerRadius="10"
        Effect="{DynamicResource Shadow}"
        HorizontalAlignment="Center"
        Padding="10"
        VerticalAlignment="Center"
        Width="550">

        <StackPanel>
            <Border
                Background="#242424"
                BorderBrush="#335E8F"
                CornerRadius="10"
                Name="SearchBorder">
                <Grid Height="45">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <ico:MaterialIcon
                        Foreground="#0570EB"
                        Grid.Column="0"
                        Height="25"
                        Kind="Magnify"
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        Width="25" />

                    <hc:WatermarkTextBox
                        FontSize="18"
                        Foreground="White"
                        Grid.Column="1"
                        Height="42"
                        KeyUp="SearchBox_KeyUp"
                        Margin="0,0,0,1"
                        x:Name="SearchBox" />
                </Grid>
            </Border>

            <ListView
                Background="Transparent"
                BorderThickness="0"
                Foreground="White"
                Height="{Binding ResultsHeight, Mode=TwoWay}"
                ItemsSource="{Binding FilteredResults}"
                Margin="10"
                SelectedItem="{Binding SelectedResult}"
                x:Name="ResultsList">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Width="40">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Image
                                        Height="25"
                                        HorizontalAlignment="Center"
                                        Source="{Binding Icon.Source}"
                                        StretchDirection="Both"
                                        VerticalAlignment="Center"
                                        Width="30" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn DisplayMemberBinding="{Binding Name}" Width="Auto" />
                    </GridView>
                </ListView.View>
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="Focusable" Value="False" />
                        <Setter Property="IsTabStop" Value="False" />
                        <Setter Property="FontWeight" Value="Bold" />
                        <Setter Property="FontSize" Value="14" />
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="BorderBrush" Value="Transparent" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Padding" Value="0" />
                        <Setter Property="Height" Value="40" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListViewItem">
                                    <Border
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="Transparent"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="0"
                                        x:Name="ItemBorder">
                                        <Grid>
                                            <GridViewRowPresenter Columns="{TemplateBinding GridView.ColumnCollection}" Content="{TemplateBinding Content}" />
                                        </Grid>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" TargetName="ItemBorder" Value="#274464" />
                                            <Setter Property="BorderBrush" TargetName="ItemBorder" Value="#274464" />
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" TargetName="ItemBorder" Value="#0570EB" />
                                            <Setter Property="BorderBrush" TargetName="ItemBorder" Value="#0570EB" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListView.ItemContainerStyle>
                <ListView.Template>
                    <ControlTemplate TargetType="ListView">
                        <Border
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                            <ScrollViewer Focusable="false" Padding="{TemplateBinding Padding}">
                                <ItemsPresenter />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </ListView.Template>
            </ListView>
        </StackPanel>
    </Border>
</hc:Window>